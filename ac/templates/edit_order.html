{% extends "base.html" %}

{% block content %}
  {{ block.super }}
<!--          <form method="POST" enctype="multipart/form-data">-->
          <form method="POST" enctype="multipart/form-data" action="{% url 'order_edited' pk=order.pk %}" id="TypeValidation">
            {% csrf_token %}
<!--             <button class="btn btn-success"><a style="color:white" href="{% url 'orders' %}">Back</a></button>-->
<!--            <input type="submit" class="btn btn-success pull-right" value="Save">-->
<!--             <button class="btn btn-success pull-right"><a style="color:white" href="{% url 'order_delete' pk=order.pk %}">Delete</a></button>-->
<!--            &nbsp;&nbsp;<button style="border-radius: 3px; border-width: thin;" sty><a style="color:black" href="/order/audit/{{order.pk}}">Audit</a></button>-->
<!--            &nbsp;&nbsp;<button style="border-radius: 3px; border-width: thin;" sty><a style="color:black" href="/orders/pay">Make Payment</a></button>-->

            <br>
                {% if messages %}
                  {% for message in messages %}
                  <h4 class="text-success text-center">{{message}}</h4>
                  {% endfor %}
                {% endif %}
                <br>
            <div class="row">
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Agent</h4>
                  </div>
                  </div>
                  <div class="card-body form-inline">
                    <div class="form-row">
                    <div class="col-6">
                      <label><span class="pr-0">Brokerage:&nbsp;</span><input type="text" class="form-control" value="{{order.agent.brokerage.name}}" name="agent_brokerage_name" disabled/></label>
                    </div>
                    <div class="col-6">
                      <label><span class="pl-0">Phone:&nbsp;</span><input type="text" class="form-control" value="{{order.agent.phone}}" name="agent_phone" disabled/></label>
                    </div>
                    </div>
                    <div class="form-row">
                    <div class="col-6">
                      <label><span class="pr-0">Realtor ID:&nbsp;</span><input type="text" class="form-control" value="{{order.agent.brokerage.realtor_id}}" name="agent_realtor_id" disabled/></label>
                    </div>
                    <div class="col-6">
                      <label><span class="pl-0">Email:&nbsp;</span><input type="email" class="form-control" value="{{order.agent.email}}" name="agent_email" disabled/></label>
                    </div>
                    </div>
                    <div class="form-row">
                    <div class="col">
                      <label><span class="pr-0">Company Name:&nbsp;</span><input type="text" class="form-control" value="{{order.agent.brokerage.company}}" name="agent_company_name" disabled/></label>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Customer</h4>
                  </div>
                  </div>
                  <div class="card-body">
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">Name:&nbsp;</span><input type="text" class="form-control" value="{{order.customer.first_name}}" name="customer_name" disabled/></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pl-0">Email:&nbsp;</span><input type="email" class="form-control" value="{{order.customer.email}}" name="customer_email" disabled/></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pl-0">Phone:&nbsp;</span><input type="text" class="form-control" value="{{order.customer.phone}}" name="customer_phone" disabled/></label>
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Property</h4>
                  </div>
                  </div>
                  <div class="card-body">
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">MLS ID:&nbsp;</span><input type="text" class="form-control" value="{{order.mls_id}}" name="mls_id" number="true" required/></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pl-0">MLS URL:&nbsp;</span><input type="text" class="form-control" value="{{order.listing_url}}" name="listing_url" url="true"/></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">Address 1:&nbsp;</span><input type="text" class="form-control property_address_component_input" value="{{order.address1}}" name="property_address1" /></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">Address 2:&nbsp;</span><input type="text" class="form-control" value="{{order.address2}}" name="property_address2" /></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">City:&nbsp;</span><input type="text" class="form-control property_address_component_input" value="{{order.city}}" name="property_city" /></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">State:&nbsp;</span><input type="text" class="form-control property_address_component_input" value="{{order.state}}" name="property_state" /></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">ZIP:&nbsp;</span><input type="text" class="form-control property_address_component_input" value="{{order.zip_code}}" name="property_zip_code" /></label>
                      </div>
                      </div>
                    </div>
                    <div class="form-group form-inline">
                      <div class="form-row">
                      <div class="col">
                        <label><span class="pr-0">Country:&nbsp;</span><input type="text" class="form-control property_address_component_input" value="{{order.country}}" name="property_country" /></label>
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Status</h4>
                  </div>
                  </div>
                  <div class="card-body">

                  <ul class="timeline">
                    <li class="timeline-inverted">
                      <div class="timeline-badge info">
                        <i class="material-icons">card_travel</i>
                      </div>
                      <div class="timeline-panel">
                        <div class="timeline-heading">
                          <span class="badge badge-pill badge-info">Down Payment</span>
                        </div>
                        <div class="timeline-body">
                          <p>Down Payment</p>
                        </div>
                        <h6>
                          <i class="ti-time"></i> 11 hours ago
                        </h6>
                      </div>
                    </li>
                    <li>
                      <div class="timeline-badge primary">
                        <i class="material-icons">extension</i>
                      </div>
                      <div class="timeline-panel">
                        <div class="timeline-heading">
                          <span class="badge badge-pill badge-primary">Escrow</span>
                        </div>
                        <div class="timeline-body">
                          <p>Escrow</p>
                        </div>
                        <h6>
                          <i class="ti-time"></i> Today
                        </h6>
                      </div>
                    </li>
                  </ul>

<!--                    old data-->
<!--                    <div class="form-check form-check-right">-->
<!--                      <label class="form-check-label">-->
<!--                        <input class="form-check-input" type="checkbox" value="" name="status_escrow" />-->
<!--                        Escrow: &nbsp;-->
<!--                        <span class="form-check-sign">-->
<!--                          <span class="check"></span>-->
<!--                        </span>-->
<!--                      </label>-->
<!--                    </div>-->
<!--                    <div class="form-check form-check-right">-->
<!--                      <label class="form-check-label">-->
<!--                        <input class="form-check-input" type="checkbox" value="" name="status_down_payment" />-->
<!--                        Down Payment: &nbsp;-->
<!--                        <span class="form-check-sign">-->
<!--                          <span class="check"></span>-->
<!--                        </span>-->
<!--                      </label>-->
<!--                    </div>-->
<!--                    <div class="form-group form-inline">-->
<!--                      <div class="form-row">-->
<!--                      <div class="col">-->
<!--                        <button type="button" class="btn btn-success btn" disabled="disabled" style="cursor:not-allowed;">Pay</button>-->
<!--                      </div>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                    old data end-->

                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                    <div class="card-text">
                    <h4 class="card-title">Google View</h4>
                    </div>
                  </div>
                  <div class="card-body">
                    <div id="google_view" class="map"></div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Provisions</h4>
                  </div>
                  </div>
                  <div class="card-body">
                    <div class="col">
                        <h4 class="card-header">Order Qr Code</h4>
                        <img src="{{order.qr_code}}" alt="qr_code">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="card card-equal">
                <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                  <h4 class="card-title">Notes</h4>
                  </div>
                </div>
                <div class="card-body ">
                  <textarea style="width: 100%; height: 280px !important;" name="agent_notes">{{order.agent_notes}}</textarea>
                </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card card-equal">
                  <div class="card-header card-header-text card-header-success">
                  <div class="card-text">
                    <h4 class="card-title">Documents</h4>
                  </div>
                  </div>
                  <div class="card-body">
                  <div class="card">

                   <input type="file" multiple
                          name="property_files"
                          id="file"
                          onchange="javascript:updateList()" />
                      <p>Selected files:</p>
                    <div id="fileList"></div>
                    <div class="form-check pull-right">
                      <label class="form-check-label">
                        {% if shared %}
                        <input class="form-check-input" type="checkbox" value="True" name="shared_status" checked/>
                          {% else %}
                        <input class="form-check-input" type="checkbox" value="True" name="shared_status"/>
                        {% endif %}
                        Shared
                        <span class="form-check-sign">
                          <span class="check"></span>
                        </span>
                      </label>
                    </div>
                  </div>

                    <ul>
                      {% for document in documents %}
                      <li>
                          <a href="{{document.document_file.url}}" target="_blank">{{document}}</a>
                     </li>
                      {% endfor %}
                    </ul>

<!--                    <ul>-->
<!--                      {% for document in documents %}-->
<!--                      <li>-->
<!--                      <div>-->
<!--                        <div class="pull-left">-->
<!--                          <a href="{{document.document_file.url}}" target="_blank">{{document}}</a>-->
<!--                        </div>-->
<!--                        <div class="form-check pull-right">-->
<!--                          <label class="form-check-label">-->
<!--                            {% if document.shared %}-->
<!--                            <input class="form-check-input" type="checkbox" value="{{document.document_file}}" name="shared_status" checked/>-->
<!--                            {% else %}-->
<!--                            <input class="form-check-input" type="checkbox" value="{{document.document_file}}" name="shared_status"/>-->
<!--                            {% endif %}-->
<!--                            Shared-->
<!--                            <span class="form-check-sign">-->
<!--                              <span class="check"></span>-->
<!--                            </span>-->
<!--                          </label>-->
<!--                        </div>-->
<!--                      </div>-->
<!--                    </li>-->
<!--                      {% endfor %}-->
<!--                    </ul>-->
                  </div>

<!--                  <div class="card-body">-->
<!--                    <div class="fileinput fileinput-new text-center" data-provides="fileinput">-->
<!--                    <div class="fileinput-preview fileinput-exists thumbnail img-raised"></div>-->
<!--                    <div>-->
<!--                      <span class="btn btn-raised btn-round btn-default btn-file">-->
<!--                        <span class="fileinput-new">Select file</span>-->
<!--                        <span class="fileinput-exists">Change</span>-->
<!--                        <input type="file" name="property_documents" />-->
<!--                      </span>-->
<!--                      <a href="javascript:;" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> Remove</a>-->
<!--                    </div>-->
<!--                    </div>-->
<!--                  </div>-->
                </div>
              </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                    <button class="btn btn-success pull-right"><a style="color:white" href="{% url 'order_delete' pk=order.pk %}">Delete</a></button>
                  </div>
                  <div class="col-md-6">
                    <input type="submit" class="btn btn-success" value="Save">
                  </div>
              </div>
          </form>
{% endblock %}
